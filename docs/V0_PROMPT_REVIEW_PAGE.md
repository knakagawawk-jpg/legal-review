# v0 用プロンプト：講評結果ページのデザイン改善

## 概要

法律答案の自動講評システムの講評結果ページを v0 でデザイン改善します。
現在のページは Next.js で実装されており、左右 2 カラムレイアウト（左右パネル）とタブ機能で講評結果を表示しています。

---

## 現在のページ構造

### レイアウト概要

```
┌─────────────────────────────────────────────────────────┐
│ ヘッダー: 📊 講評結果                                    │
│ [← 戻る] ボタン                                          │
├─────────────────────║───────────────────────────────────┤
│ 左パネル              ║ 右パネル                          │
│                      ║ （ドラッグ可能なリサイザーバー）  │
│ (答案・問題文)        │ (講評・問題文・詳細情報)          │
│                      │                                   │
│ ┌─────────────────┐ │ ┌─────────────────────────────┐ │
│ │ 📝 答案          │ │ │ 📊 講評                     │ │
│ │ 📄 問題文        │ │ │ 📄 問題文                   │ │
│ └─────────────────┘ │ │ 📋 詳細情報                 │ │
│                      │ └─────────────────────────────┘ │
│                      │                                   │
│ [答案の表示エリア]   │ [講評の表示エリア]                │
│ - 白背景             │ - 白背景                          │
│ - モノスペースフォント│ - マークダウン表示               │
│ - スクロール可能     │ - スクロール可能                 │
│                      │                                   │
└─────────────────────┴───────────────────────────────────┘
┌─────────────────────────────────────────────────────────┐
│ 💬 講評について質問する                                  │
│ [チャット履歴表示エリア]                                 │
│ [質問入力欄] [送信] [履歴クリア]                         │
└─────────────────────────────────────────────────────────┘
```

### 主要な要素

1. **ヘッダー**

   - タイトル: "📊 講評結果"
   - 戻るボタン

2. **パネルリサイザー（ドラッグ可能）**

   - 左右パネルの間に配置された垂直な分割バー
   - マウスでドラッグすることで左右パネルの表示割合を調整可能（1:9 〜 9:1）
   - ドラッグ中は視覚的フィードバック（ハイライト、カーソル変更など）
   - 最小幅の制限（各パネルが完全に隠れないように）

3. **左パネル（タブ）**

   - **📝 答案タブ**: 提出された答案テキストを表示
     - 白背景、ボーダー付きカード
     - モノスペースフォント
     - コピーボタン
   - **📄 問題文タブ**: 問題文と出題趣旨を表示
     - 問題文: 白背景カード
     - 出題趣旨: グレー背景カード

4. **右パネル（タブ）**

   - **📊 講評タブ**: 講評結果をマークダウンで表示
     - スコア（0-100 点）
     - 総評コメント
     - ✅ 評価した点（長所）
     - ❌ 改善点（短所）
     - 📌 重要な段落
     - 今後意識すべきこと
   - **📄 問題文タブ**: 左パネルと同じ内容
   - **📋 詳細情報タブ**: JSON 形式の生データ

5. **下部チャット欄**
   - 固定高さ（300px）
   - チャット履歴表示エリア（スクロール可能）
   - 質問入力欄
   - 送信ボタン
   - 履歴クリアボタン

---

## データ構造

### 講評結果の JSON 構造

```json
{
  "submission_id": 123,
  "subject": "民法",
  "answer_text": "答案のテキスト...",
  "question_text": "問題文のテキスト...",
  "purpose": "出題趣旨のテキスト...",
  "review_markdown": "マークダウン形式の講評...",
  "review_json": {
    "final_review": {
      "score": 75,
      "strengths": [...],
      "weaknesses": [...]
    },
    "evaluation": {
      "overall_review": {
        "score": 75,
        "comment": "総評コメント..."
      },
      "strengths": [
        {
          "category": "論点の拾い上げ",
          "description": "具体的な説明...",
          "paragraph_numbers": [1, 2]
        }
      ],
      "weaknesses": [
        {
          "category": "規範定立",
          "description": "改善点の説明...",
          "paragraph_numbers": [3, 4],
          "suggestion": "具体的な改善提案"
        }
      ],
      "important_points": [
        {
          "paragraph_number": 5,
          "what_is_good": "この段落で十分に書けている点",
          "what_is_lacking": "この段落で不足している点",
          "why_important": "なぜこの段落が重要か"
        }
      ],
      "future_considerations": [
        "今後意識すべきこと1",
        "今後意識すべきこと2"
      ]
    }
  }
}
```

---

## 現在のデザインの問題点

1. **視覚的な階層が不明確**

   - スコアや重要な情報が目立たない
   - 長所・短所の区別が視覚的に弱い

2. **情報密度が高い**

   - 一度に多くの情報が表示され、読みづらい
   - スクロール量が多い

3. **インタラクティブ性の欠如**

   - 段落番号が表示されているが、該当箇所へのジャンプ機能がない
   - 長所・短所の表示がリスト形式のみで視覚的インパクトが弱い

4. **パネルサイズ調整の UI が非直感的**
   - 現在は上部にスライダー（range input）で調整する方式
   - パネルの間にドラッグ可能なリサイザーバーがある方が直感的で使いやすい
   - リアルタイムでパネルのサイズが変わることが視覚的に分かりやすい

5. **チャット欄の UI がシンプル**
   - チャット履歴の視認性が低い
   - ユーザー・アシスタントの発言の区別が弱い

---

## v0 に求める改善点

### デザイン改善の優先順位

#### 1. **スコア表示の強化**（最重要）

- 大きな円形プログレスバーやゲージでスコアを表示
- スコアに応じた色分け（例: 90-100: 緑、70-89: 黄、50-69: オレンジ、0-49: 赤）
- スコアの横に簡潔な評価レーベル（例: "優秀"、"良好"、"要改善"）

#### 2. **長所・短所の視覚化**

- 長所（✅）: 緑系のカード、左側に縦線
- 短所（❌）: 赤系のカード、左側に縦線
- カテゴリごとにアイコンやバッジを表示
- 段落番号をクリック可能なバッジとして表示（クリックで該当段落にジャンプ）

#### 3. **情報の階層化**

- 重要度に応じたフォントサイズと色の調整
- セクションごとの明確な区切り
- 折りたたみ可能なセクション（詳細情報など）

#### 4. **チャット欄の改善**

- ユーザー・アシスタントの発言を明確に区別
- アバターやアイコンの追加
- タイムスタンプの表示（オプション）
- メッセージバブルのデザイン改善

#### 5. **パネルリサイザーの実装**（重要）

- 左右パネルの間にドラッグ可能なリサイザーバーを配置
- マウスオーバー時の視覚的フィードバック（色変更、カーソル変更など）
- ドラッグ中のリアルタイムリサイズ
- 各パネルの最小幅制限（10%以上を維持）
- ドラッグ終了時に幅を保持（localStorageに保存して次回も維持）

#### 6. **レスポンシブ対応**

- 左右パネルを画面サイズに応じて調整
- モバイル表示時の縦積みレイアウト

#### 7. **アニメーション・トランジション**

- スムーズなページ遷移
- タブ切り替え時のトランジション
- 読み込み時のスケルトンローディング

---

## v0 へのプロンプト例

```
法律答案の自動講評システムの講評結果ページをデザインしてください。

【ページ構造】
- ヘッダー: タイトルと戻るボタン
- 左右パネル: 間にドラッグ可能なリサイザーバーを配置
  - 左パネル: 答案と問題文をタブで切り替え表示
  - リサイザーバー: 垂直な分割バー、ドラッグで幅を調整
  - 右パネル: 講評、問題文、詳細情報をタブで切り替え表示
- 下部: チャット欄（固定高さ）

【パネルリサイザーの仕様】
- 左右パネルの間に配置された垂直な分割バー
- マウスオーバー時に視覚的フィードバック（色変更、カーソル変更）
- ドラッグ中はリサイズ中の状態を明確に表示
- 各パネルの最小幅を制限（10%以上を維持）
- ドラッグ終了時に幅を保持（リロード時も維持可能、localStorageに保存）

【主要な表示要素】
1. スコア（0-100点）: 大きな円形プログレスバー、色分け（90-100: 緑、70-89: 黄、50-69: オレンジ、0-49: 赤）
2. 総評コメント: 太字、読みやすいフォント
3. 長所リスト: 緑系カード、✅アイコン、左側に緑の縦線、カテゴリバッジ
4. 短所リスト: 赤系カード、❌アイコン、左側に赤の縦線、カテゴリバッジ、改善提案付き
5. 重要な段落: ハイライト表示、クリック可能な段落番号バッジ
6. 今後意識すべきこと: リスト形式

【デザイン要件】
- モダンでクリーンなデザイン
- 重要な情報が目立つように
- 読みやすさを重視
- 適度な余白とパディング
- スクロール可能なエリアは明確に
- チャット欄はユーザー・アシスタントの発言を明確に区別

【技術要件】
- React/Next.js
- Tailwind CSSを使用
- レスポンシブ対応
- アニメーションは控えめに
```

---

## カラーパレット提案

### メインカラー

- **プライマリ**: `#667eea` (紫系)
- **セカンダリ**: `#764ba2` (濃い紫)

### 機能別カラー

- **スコア（優秀）**: `#10b981` (緑)
- **スコア（良好）**: `#f59e0b` (黄)
- **スコア（要改善）**: `#f97316` (オレンジ)
- **スコア（低）**: `#ef4444` (赤)
- **長所**: `#10b981` (緑系)
- **短所**: `#ef4444` (赤系)
- **背景**: `#fafafa` (薄いグレー)
- **テキスト**: `#1f2937` (濃いグレー)

---

## 参考になるデザインパターン

1. **ダッシュボード UI**: 情報の階層化とビジュアライゼーション
2. **教育プラットフォーム**: フィードバックとスコアリングの表示
3. **コードレビューツール**: 差分表示とコメント機能
4. **チャットアプリ**: メッセージバブルのデザイン

---

## 注意事項

- 現在の実装は Next.js（React + Tailwind CSS + shadcn/ui）です
- v0 で生成されたコンポーネントは直接 Next.js プロジェクトに統合できます
- 既存の機能（タブ、左右パネル）は既に実装済みです
- **パネルリサイザーは未実装**です。現在はスライダー（range input）で実装されていますが、左右パネルの間にドラッグ可能なリサイザーバーを実装する必要があります
- デザインの改善や UI の最適化を目的としています

## パネルリサイザーの実装仕様（詳細）

### UI仕様

1. **リサイザーバーの見た目**
   - 左右パネルの間に配置された垂直な細いバー（幅: 4-8px程度）
   - デフォルト状態: 薄いグレーまたは半透明
   - ホバー時: アクセントカラー（例: プライマリカラー）でハイライト
   - ドラッグ中: より濃い色でアクティブ状態を表示

2. **カーソルの変更**
   - ホバー時: `cursor: col-resize` または `cursor: ew-resize`
   - ドラッグ中: `cursor: grabbing` または `cursor: ew-resize`

3. **ドラッグ機能**
   - マウスダウン時にドラッグ開始
   - マウスムーブで左右パネルの幅をリアルタイム更新
   - マウスアップでドラッグ終了
   - タッチデバイス対応（touchstart, touchmove, touchend）

4. **制約**
   - 左パネルの最小幅: 10%（全体幅の10%）
   - 右パネルの最小幅: 10%（全体幅の10%）
   - ドラッグ中に最小幅に達したらそれ以上リサイズしない

5. **状態の保持**
   - ドラッグ終了時に幅の比率をlocalStorageに保存
   - ページリロード時に保存された比率を復元
   - キー名例: `review_panel_ratio` または `panel_ratio_left`

### 実装例（参考）

```typescript
// React Hookの例
const [leftWidth, setLeftWidth] = useState(50) // パーセンテージ
const [isResizing, setIsResizing] = useState(false)

// マウスイベントハンドラー
const handleMouseDown = (e: React.MouseEvent) => {
  setIsResizing(true)
  // ドラッグ開始
}

const handleMouseMove = (e: MouseEvent) => {
  if (!isResizing) return
  // マウス位置からパネル幅を計算
  // 最小幅制限を適用
  // 状態を更新
}

const handleMouseUp = () => {
  setIsResizing(false)
  // localStorageに保存
}
```

### 参考デザインパターン

- VSCodeのパネルリサイザー
- Chrome DevToolsのパネルリサイザー
- Figmaのパネルリサイザー
- Split Paneライブラリ（react-split-pane等）の実装パターン
